{"ast":null,"code":"var _jsxFileName = \"/Users/nazanin/Langara-Term4/React-Native/Final Exam/artists-instruments-boilerplate-antd/client/src/components/buttons/RemoveArtist.js\";\nimport React from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { useQuery } from '@apollo/react-hooks';\nimport { filter } from 'lodash';\nimport { GET_ARTISTS, REMOVE_ARTIST, REMOVE_INSTRUMENT, GET_ARTISTSINSTRUMENTS } from '../../queries';\nimport { DeleteOutlined } from '@ant-design/icons';\n\nconst RemoveArtist = ({\n  id,\n  firstName,\n  lastName\n}) => {\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(GET_ARTISTSINSTRUMENTS, {\n    variables: {\n      artistId: id\n    }\n  });\n  const [removeArtist] = useMutation(REMOVE_ARTIST, {\n    update(proxy, {\n      data: {\n        removeArtist\n      }\n    }) {\n      const {\n        artists\n      } = proxy.readQuery({\n        query: GET_ARTISTS\n      });\n      proxy.writeQuery({\n        query: GET_ARTISTS,\n        data: {\n          artists: filter(artists, c => {\n            return c.id !== removeArtist.id;\n          })\n        }\n      });\n    }\n\n  });\n  const [removeInstrument] = useMutation(REMOVE_INSTRUMENT);\n\n  const handleButtonClick = () => {\n    let result = window.confirm('Are you sure you want to delete this artist and all instruments?');\n\n    if (result) {\n      removeArtist({\n        variables: {\n          id\n        },\n        optimisticResponse: {\n          __typename: 'Mutation',\n          removeArtist: {\n            __typename: 'Artist',\n            id,\n            firstName,\n            lastName\n          }\n        }\n      }); // data.getInstruments.map((id, year, brand, type, price, artistId) => {\n      //   removeInstrument({\n      //     variables: {\n      //       id\n      //     },\n      //     optimisticResponse: {\n      //       __typename: 'Mutation',\n      //       removeInstrument: {\n      //         __typename: 'Instrument',\n      //         id,\n      //         year,\n      //         brand,\n      //         type,\n      //         price,\n      //         artistId\n      //       }\n      //     }\n      //   })\n      // })\n    }\n\n    console.log(data.getInstruments);\n  };\n\n  return /*#__PURE__*/React.createElement(DeleteOutlined, {\n    key: \"delete\",\n    onClick: handleButtonClick,\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default RemoveArtist;","map":{"version":3,"sources":["/Users/nazanin/Langara-Term4/React-Native/Final Exam/artists-instruments-boilerplate-antd/client/src/components/buttons/RemoveArtist.js"],"names":["React","useMutation","useQuery","filter","GET_ARTISTS","REMOVE_ARTIST","REMOVE_INSTRUMENT","GET_ARTISTSINSTRUMENTS","DeleteOutlined","RemoveArtist","id","firstName","lastName","loading","error","data","variables","artistId","removeArtist","update","proxy","artists","readQuery","query","writeQuery","c","removeInstrument","handleButtonClick","result","window","confirm","optimisticResponse","__typename","console","log","getInstruments","color"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,SAASC,WAAT,EAAsBC,aAAtB,EAAqCC,iBAArC,EAAwDC,sBAAxD,QAAsF,eAAtF;AACA,SAASC,cAAT,QAA+B,mBAA/B;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA,EAAF;AAAMC,EAAAA,SAAN;AAAiBC,EAAAA;AAAjB,CAAD,KAAiC;AACpD,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,KAAX;AAAkBC,IAAAA;AAAlB,MAA2Bb,QAAQ,CAACK,sBAAD,EAAyB;AAChES,IAAAA,SAAS,EAAE;AAAEC,MAAAA,QAAQ,EAAEP;AAAZ;AADqD,GAAzB,CAAzC;AAMA,QAAM,CAACQ,YAAD,IAAiBjB,WAAW,CAACI,aAAD,EAAgB;AAChDc,IAAAA,MAAM,CAACC,KAAD,EAAQ;AAAEL,MAAAA,IAAI,EAAE;AAAEG,QAAAA;AAAF;AAAR,KAAR,EAAoC;AACxC,YAAM;AAAEG,QAAAA;AAAF,UAAcD,KAAK,CAACE,SAAN,CAAgB;AAAEC,QAAAA,KAAK,EAAEnB;AAAT,OAAhB,CAApB;AACAgB,MAAAA,KAAK,CAACI,UAAN,CAAiB;AACfD,QAAAA,KAAK,EAAEnB,WADQ;AAEfW,QAAAA,IAAI,EAAE;AACJM,UAAAA,OAAO,EAAElB,MAAM,CAACkB,OAAD,EAAUI,CAAC,IAAI;AAC5B,mBAAOA,CAAC,CAACf,EAAF,KAASQ,YAAY,CAACR,EAA7B;AACD,WAFc;AADX;AAFS,OAAjB;AAQD;;AAX+C,GAAhB,CAAlC;AAcA,QAAM,CAACgB,gBAAD,IAAqBzB,WAAW,CAACK,iBAAD,CAAtC;;AAEA,QAAMqB,iBAAiB,GAAG,MAAM;AAC9B,QAAIC,MAAM,GAAGC,MAAM,CAACC,OAAP,CAAe,kEAAf,CAAb;;AACA,QAAIF,MAAJ,EAAY;AACVV,MAAAA,YAAY,CAAC;AACXF,QAAAA,SAAS,EAAE;AACTN,UAAAA;AADS,SADA;AAIXqB,QAAAA,kBAAkB,EAAE;AAClBC,UAAAA,UAAU,EAAE,UADM;AAElBd,UAAAA,YAAY,EAAE;AACZc,YAAAA,UAAU,EAAE,QADA;AAEZtB,YAAAA,EAFY;AAGZC,YAAAA,SAHY;AAIZC,YAAAA;AAJY;AAFI;AAJT,OAAD,CAAZ,CADU,CAeV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;AACDqB,IAAAA,OAAO,CAACC,GAAR,CAAYnB,IAAI,CAACoB,cAAjB;AACD,GAtCD;;AAuCA,sBACE,oBAAC,cAAD;AACE,IAAA,GAAG,EAAC,QADN;AAEE,IAAA,OAAO,EAAER,iBAFX;AAGE,IAAA,KAAK,EAAE;AAAES,MAAAA,KAAK,EAAE;AAAT,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAOD,CArED;;AAuEA,eAAe3B,YAAf","sourcesContent":["import React from 'react'\nimport { useMutation } from '@apollo/react-hooks'\nimport { useQuery } from '@apollo/react-hooks'\nimport { filter } from 'lodash'\nimport { GET_ARTISTS, REMOVE_ARTIST, REMOVE_INSTRUMENT, GET_ARTISTSINSTRUMENTS } from '../../queries'\nimport { DeleteOutlined } from '@ant-design/icons'\n\nconst RemoveArtist = ({ id, firstName, lastName }) => {\n  const { loading, error, data } = useQuery(GET_ARTISTSINSTRUMENTS, {\n    variables: { artistId: id },\n  })\n\n\n\n  const [removeArtist] = useMutation(REMOVE_ARTIST, {\n    update(proxy, { data: { removeArtist } }) {\n      const { artists } = proxy.readQuery({ query: GET_ARTISTS })\n      proxy.writeQuery({\n        query: GET_ARTISTS,\n        data: {\n          artists: filter(artists, c => {\n            return c.id !== removeArtist.id\n          })\n        }\n      })\n    }\n  })\n\n  const [removeInstrument] = useMutation(REMOVE_INSTRUMENT)\n\n  const handleButtonClick = () => {\n    let result = window.confirm('Are you sure you want to delete this artist and all instruments?')\n    if (result) {\n      removeArtist({\n        variables: {\n          id\n        },\n        optimisticResponse: {\n          __typename: 'Mutation',\n          removeArtist: {\n            __typename: 'Artist',\n            id,\n            firstName,\n            lastName\n          }\n        }\n      })\n      // data.getInstruments.map((id, year, brand, type, price, artistId) => {\n      //   removeInstrument({\n      //     variables: {\n      //       id\n      //     },\n      //     optimisticResponse: {\n      //       __typename: 'Mutation',\n      //       removeInstrument: {\n      //         __typename: 'Instrument',\n      //         id,\n      //         year,\n      //         brand,\n      //         type,\n      //         price,\n      //         artistId\n      //       }\n      //     }\n      //   })\n      // })\n    }\n    console.log(data.getInstruments)\n  }\n  return (\n    <DeleteOutlined\n      key='delete'\n      onClick={handleButtonClick}\n      style={{ color: 'red' }}\n    />\n  )\n}\n\nexport default RemoveArtist\n"]},"metadata":{},"sourceType":"module"}